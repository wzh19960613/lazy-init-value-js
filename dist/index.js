class i{static autoFreeze=!0;_value;_initFn;_autoFreeze;constructor(e,t){this._initFn=e,this._autoFreeze=t??s.autoFreeze}get inited(){return!this._initFn}reset(e){this._initFn=e}freeze(){if(Object.isFrozen(this))return;delete this._autoFreeze,Object.freeze(this)}}class s extends i{static get autoFreeze(){return i.autoFreeze}static set autoFreeze(e){i.autoFreeze=e}constructor(e,t){super(e,t)}get value(){if(!this._initFn)return this._value;if(this._value=this._initFn(),delete this._initFn,this._autoFreeze)this.freeze();return this._value}}class n extends i{static get autoFreeze(){return i.autoFreeze}static set autoFreeze(e){i.autoFreeze=e}_initing;_resolvers=[];_rejections=[];constructor(e,t){super(e,t)}get initing(){return this._initing??!1}_init_value(){this._initing=!0,this._initFn().then((e)=>{this._value=e,delete this._initFn,delete this._initing;for(let t of this._resolvers??[])t(e);if(delete this._resolvers,delete this._rejections,this._autoFreeze)this.freeze()}).catch((e)=>{delete this._initing;for(let t of this._rejections??[])t(e);delete this._resolvers,delete this._rejections})}value(){if(!this._initFn)return this._value;if(!this._resolvers)this._resolvers=[],this._rejections=[];const e=new Promise((t,r)=>{this._resolvers.push(t),this._rejections.push(r)});if(!this._initing)this._init_value();return e}get value_sync(){if(!this._initFn)return this._value;if(!this._initing)this._init_value()}}export{i as LazyInitValueBase,s as LazyInitValue,n as LazyAsyncInitValue};

//# debugId=2BDBB6CFDEEF711F64756E2164756E21
//# sourceMappingURL=index.js.map
