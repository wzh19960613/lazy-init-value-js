{
  "version": 3,
  "sources": ["..\\src\\index.ts"],
  "sourcesContent": [
    "export class LazyInitValueBase<T, INIT_FN> {\n    static autoFreeze = true\n\n    protected _value?: T\n    protected _initFn?: INIT_FN\n    protected _autoFreeze?: boolean\n\n    constructor(initFn: INIT_FN, autoFreeze?: boolean) {\n        this._initFn = initFn\n        this._autoFreeze = autoFreeze ?? LazyInitValue.autoFreeze\n    }\n\n    get inited() { return !this._initFn }\n\n    reset(initFn: INIT_FN) { this._initFn = initFn }\n\n    freeze() {\n        if (Object.isFrozen(this)) return\n        delete this._autoFreeze\n        Object.freeze(this)\n    }\n}\n\nexport class LazyInitValue<T> extends LazyInitValueBase<T, () => T> {\n    static get autoFreeze() { return LazyInitValueBase.autoFreeze }\n    static set autoFreeze(autoFreeze: boolean) { LazyInitValueBase.autoFreeze = autoFreeze }\n\n    constructor(initFn: () => T, autoFreeze?: boolean) { super(initFn, autoFreeze) }\n\n    get value() {\n        if (!this._initFn) return this._value as T\n        this._value = this._initFn()\n        delete this._initFn\n        if (this._autoFreeze) this.freeze()\n        return this._value\n    }\n}\n\nexport class LazyAsyncInitValue<T> extends LazyInitValueBase<T, () => Promise<T>> {\n    static get autoFreeze() { return LazyInitValueBase.autoFreeze }\n    static set autoFreeze(autoFreeze: boolean) { LazyInitValueBase.autoFreeze = autoFreeze }\n\n    protected _initing?: true\n    protected _resolvers?: ((value: T) => void)[] = []\n    protected _rejections?: ((reason: any) => void)[] = []\n\n    constructor(initFn: () => Promise<T>, autoFreeze?: boolean) { super(initFn, autoFreeze) }\n\n    get initing() { return this._initing ?? false }\n\n    _init_value() {\n        this._initing = true\n        this._initFn!().then(value => {\n            this._value = value\n            delete this._initFn\n            delete this._initing\n            for (const res of this._resolvers ?? []) res(value)\n            delete this._resolvers\n            delete this._rejections\n            if (this._autoFreeze) this.freeze()\n        }).catch(reason => {\n            delete this._initing\n            for (const rej of this._rejections ?? []) rej(reason)\n            delete this._resolvers\n            delete this._rejections\n        })\n    }\n\n    value() {\n        if (!this._initFn) return this._value as T\n        if (!this._resolvers) {\n            this._resolvers = []\n            this._rejections = []\n        }\n        const promise = new Promise<T>((resolve, reject) => {\n            this._resolvers!.push(resolve)\n            this._rejections!.push(reject)\n        })\n        if (!this._initing) this._init_value()\n        return promise\n    }\n\n    get value_sync() {\n        if (!this._initFn) return this._value\n        if (!this._initing) this._init_value()\n    }\n}"
  ],
  "mappings": "AAAO,MAAM,CAA8B,OAChC,YAAa,GAEV,OACA,QACA,YAEV,WAAW,CAAC,EAAiB,EAAsB,CAC/C,KAAK,QAAU,EACf,KAAK,YAAc,GAAc,EAAc,cAG/C,OAAM,EAAG,CAAE,OAAQ,KAAK,QAE5B,KAAK,CAAC,EAAiB,CAAE,KAAK,QAAU,EAExC,MAAM,EAAG,CACL,GAAI,OAAO,SAAS,IAAI,EAAG,OAC3B,OAAO,KAAK,YACZ,OAAO,OAAO,IAAI,EAE1B,CAEO,MAAM,UAAyB,CAA8B,WACrD,WAAU,EAAG,CAAE,OAAO,EAAkB,qBACxC,WAAU,CAAC,EAAqB,CAAE,EAAkB,WAAa,EAE5E,WAAW,CAAC,EAAiB,EAAsB,CAAE,MAAM,EAAQ,CAAU,KAEzE,MAAK,EAAG,CACR,IAAK,KAAK,QAAS,OAAO,KAAK,OAG/B,GAFA,KAAK,OAAS,KAAK,QAAQ,SACpB,KAAK,QACR,KAAK,YAAa,KAAK,OAAO,EAClC,OAAO,KAAK,OAEpB,CAEO,MAAM,UAA8B,CAAuC,WACnE,WAAU,EAAG,CAAE,OAAO,EAAkB,qBACxC,WAAU,CAAC,EAAqB,CAAE,EAAkB,WAAa,EAElE,SACA,WAAsC,CAAC,EACvC,YAA0C,CAAC,EAErD,WAAW,CAAC,EAA0B,EAAsB,CAAE,MAAM,EAAQ,CAAU,KAElF,QAAO,EAAG,CAAE,OAAO,KAAK,UAAY,GAExC,WAAW,EAAG,CACV,KAAK,SAAW,GAChB,KAAK,QAAS,EAAE,KAAK,KAAS,CAC1B,KAAK,OAAS,SACP,KAAK,eACL,KAAK,SACZ,QAAW,KAAO,KAAK,YAAc,CAAC,EAAG,EAAI,CAAK,EAGlD,UAFO,KAAK,kBACL,KAAK,YACR,KAAK,YAAa,KAAK,OAAO,EACrC,EAAE,MAAM,KAAU,CACf,OAAO,KAAK,SACZ,QAAW,KAAO,KAAK,aAAe,CAAC,EAAG,EAAI,CAAM,EACpD,OAAO,KAAK,kBACL,KAAK,YACf,EAGL,KAAK,EAAG,CACJ,IAAK,KAAK,QAAS,OAAO,KAAK,OAC/B,IAAK,KAAK,WACN,KAAK,WAAa,CAAC,EACnB,KAAK,YAAc,CAAC,EAExB,MAAM,EAAU,IAAI,QAAW,CAAC,EAAS,IAAW,CAChD,KAAK,WAAY,KAAK,CAAO,EAC7B,KAAK,YAAa,KAAK,CAAM,EAChC,EACD,IAAK,KAAK,SAAU,KAAK,YAAY,EACrC,OAAO,KAGP,WAAU,EAAG,CACb,IAAK,KAAK,QAAS,OAAO,KAAK,OAC/B,IAAK,KAAK,SAAU,KAAK,YAAY,EAE7C",
  "debugId": "2BDBB6CFDEEF711F64756E2164756E21",
  "names": []
}